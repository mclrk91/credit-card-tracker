<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jack & Marissa Credit Card Tracker</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; }
        .icon { width: 20px; height: 20px; display: inline-block; vertical-align: middle; }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect } = React;

        // Simple icon components
        const ChevronUp = () => <span className="icon">‚Üë</span>;
        const ChevronDown = () => <span className="icon">‚Üì</span>;
        const Plus = () => <span className="icon">+</span>;
        const Trash2 = () => <span className="icon">üóë</span>;
        const Download = () => <span className="icon">‚¨á</span>;
        const Search = () => <span className="icon">üîç</span>;
        const CheckCircle2 = () => <span className="icon">‚úÖ</span>;

        function App() {
            const [activeTab, setActiveTab] = useState('overview');
            const [editMode, setEditMode] = useState(false);
            const [loyaltyEditMode, setLoyaltyEditMode] = useState(false);
            const [sortConfig, setSortConfig] = useState({ key: null, direction: 'asc' });
            const [loyaltySearch, setLoyaltySearch] = useState('');
            const [sheetData, setSheetData] = useState(null);
            const [loadingSheet, setLoadingSheet] = useState(false);
            
            // Persist benefits across sessions
            const [benefitsChecked, setBenefitsChecked] = useState(() => {
                const saved = localStorage.getItem('benefitsChecked');
                return saved ? JSON.parse(saved) : {};
            });
            
            // Points balances
            const [pointsBalances, setPointsBalances] = useState(() => {
                const saved = localStorage.getItem('pointsBalances');
                return saved ? JSON.parse(saved) : {
                    'Marissa Amex': 504960,
                    'Jack Amex': 105038,
                    'Marissa Chase Business': 384280,
                    'Marissa Chase Personal': 56838,
                    'Etihad': 13000,
                    'Marissa Delta': 4466,
                    'Marissa Virgin Atlantic': 32222,
                    'Marissa Jet Blue': 3529,
                    'Marissa British Airways': 5718,
                    'Marissa United': 1170,
                    'Marissa Bilt': 622,
                    'Marissa Marriott': 6607,
                    'Marissa Hilton': 6116,
                    'Marissa IHG': 1973,
                    'Marissa Hyatt': 10028
                };
            });

            // Loyalty numbers state
            const [loyaltyNumbers, setLoyaltyNumbers] = useState(() => {
                const saved = localStorage.getItem('loyaltyNumbers');
                return saved ? JSON.parse(saved) : {
                    'knownTraveler': [
                        { id: 1, name: 'Mike (Dad)', number: '157461621', category: 'Known Traveler' },
                        { id: 2, name: 'Tonya (Mom)', number: '157367880', category: 'Known Traveler' },
                        { id: 3, name: 'Marissa', number: '159481933', category: 'Known Traveler' },
                        { id: 4, name: 'Jack', number: '159484492', category: 'Known Traveler' }
                    ],
                    'airlines': [
                        { id: 5, name: 'Jack', number: 'XFS19203', category: 'United', subcategory: 'United' },
                        { id: 11, name: 'Marissa', number: 'FZS48862', category: 'United', subcategory: 'United', points: '1,170' },
                        { id: 9, name: 'Marissa', number: '9159698753', category: 'Delta', subcategory: 'Delta', points: '4,466' },
                        { id: 21, name: 'Jack', number: '9424346279', category: 'Delta', subcategory: 'Delta' },
                        { id: 23, name: 'Marissa', number: '1093798799', category: 'Virgin Atlantic', subcategory: 'Virgin', points: '32,222' },
                        { id: 25, name: 'Marissa', number: '06497776', category: 'British Airways', subcategory: 'BA', points: '5,718' },
                        { id: 19, name: 'JetBlue', number: '3990361422', category: 'JetBlue TrueBlue', subcategory: 'Other', points: '3,529' },
                        { id: 6, name: 'Marissa', number: '500078965304', category: 'Etihad', subcategory: 'Other', points: '13,000' }
                    ],
                    'hotels': [
                        { id: 28, name: 'Marriott Bonvoy', number: '837276489', category: 'Marriott', points: '6,607' },
                        { id: 29, name: 'Hilton Honors', number: '1434554786', category: 'Hilton', points: '6,116' },
                        { id: 30, name: 'IHG Club', number: '254873052', category: 'IHG', points: '1,973' },
                        { id: 32, name: 'World of Hyatt', number: '557111799O', category: 'Hyatt', points: '10,028' }
                    ],
                    'other': [
                        { id: 39, name: 'Marissa Bilt', number: 'TBD', category: 'Bilt', points: '622' }
                    ]
                };
            });

            // Referral links state
            const [referralLinks, setReferralLinks] = useState(() => {
                const saved = localStorage.getItem('referralLinks');
                return saved ? JSON.parse(saved) : [];
            });

            // Save states to localStorage
            useEffect(() => {
                localStorage.setItem('benefitsChecked', JSON.stringify(benefitsChecked));
            }, [benefitsChecked]);

            useEffect(() => {
                localStorage.setItem('pointsBalances', JSON.stringify(pointsBalances));
            }, [pointsBalances]);

            useEffect(() => {
                localStorage.setItem('loyaltyNumbers', JSON.stringify(loyaltyNumbers));
            }, [loyaltyNumbers]);

            useEffect(() => {
                localStorage.setItem('referralLinks', JSON.stringify(referralLinks));
            }, [referralLinks]);

            // Card data
            const baseCardData = [
                // Marissa's cards
                { person: 'Marissa', name: 'AMEX Gold Personal', digits: '21000', opened: '7/19/25', openedDate: new Date('2025-07-19'), fee: '$325', feeNum: 325, business: 'Personal', limit: 'N/A' },
                { person: 'Marissa', name: 'Chase Ink Business Preferred (Scoop)', digits: '2429', opened: '9/4/24', openedDate: new Date('2024-09-04'), fee: '$95', feeNum: 95, business: 'Scoop Hero', limit: '$9,100' },
                { person: 'Marissa', name: 'IHG ONE REWARDS Premier', digits: '4406', opened: '8/3/24', openedDate: new Date('2024-08-03'), fee: '$99', feeNum: 99, business: 'Personal', limit: '$12,000' },
                { person: 'Marissa', name: 'AMEX Business Gold Rose', digits: '21007', opened: '6/24/24', openedDate: new Date('2024-06-24'), fee: '$375', feeNum: 375, business: 'PDL', limit: 'N/A', closed: true, closedDate: '8/1/25' },
                { person: 'Marissa', name: 'Chase Ink Business Preferred', digits: '5921', opened: '4/4/24', openedDate: new Date('2024-04-04'), fee: '$95', feeNum: 95, business: 'Scoop Hero', limit: '$10,800' },
                { person: 'Marissa', name: 'Chase Sapphire Preferred', digits: '8145', opened: '3/4/24', openedDate: new Date('2024-03-04'), fee: '$95', feeNum: 95, business: 'Personal', limit: '$12,000' },
                { person: 'Marissa', name: 'AMEX Business Gold', digits: '51007', opened: '1/31/24', openedDate: new Date('2024-01-31'), fee: '$375', feeNum: 375, business: 'PDL', limit: 'N/A' },
                { person: 'Marissa', name: 'AMEX Business Platinum', digits: '2002', opened: '12/18/23', openedDate: new Date('2023-12-18'), fee: '$695', feeNum: 695, business: 'PDL', limit: 'N/A' },
                // Jack's cards
                { person: 'Jack', name: 'Personal Amex Platinum', digits: 'TBD', opened: '2/5/25', openedDate: new Date('2025-02-05'), fee: '$695', feeNum: 695, business: 'Personal', limit: 'N/A' },
                { person: 'Jack', name: 'Chase Sapphire Reserve', digits: 'TBD', opened: '4/20', openedDate: new Date('2020-04-01'), fee: '$550 ‚Üí $795', feeNum: 795, business: 'Personal', limit: 'N/A' }
            ];

            // Monthly benefits
            const monthlyBenefits = {
                'August 2025': [
                    { id: 'aug25_amex_gold_personal_dining', card: 'AMEX Gold Personal', benefit: '$10 monthly dining credit (Grubhub, etc)', person: 'Marissa' },
                    { id: 'aug25_amex_gold_personal_uber', card: 'AMEX Gold Personal', benefit: '$10 monthly Uber Cash', person: 'Marissa' },
                    { id: 'aug25_amex_gold_statement', card: 'AMEX Business Gold', benefit: '$20 monthly statement credit', person: 'Marissa' },
                    { id: 'aug25_amex_gold_walmart', card: 'AMEX Business Gold', benefit: '$12.95 monthly Walmart+ credit', person: 'Marissa' },
                    { id: 'aug25_csr_doordash', card: 'Chase Sapphire Reserve', benefit: '$5 monthly DoorDash credit', person: 'Jack' }
                ],
                'September 2025': [
                    { id: 'sep25_amex_gold_personal_dining', card: 'AMEX Gold Personal', benefit: '$10 monthly dining credit', person: 'Marissa' },
                    { id: 'sep25_amex_gold_personal_uber', card: 'AMEX Gold Personal', benefit: '$10 monthly Uber Cash', person: 'Marissa' }
                ]
            };

            // Handler functions
            const handleBenefitCheck = (benefitId) => {
                setBenefitsChecked(prev => ({
                    ...prev,
                    [benefitId]: !prev[benefitId]
                }));
            };

            const handlePointsUpdate = (program, value) => {
                setPointsBalances(prev => ({
                    ...prev,
                    [program]: parseInt(value) || 0
                }));
            };

            const handleSort = (key) => {
                let direction = 'asc';
                if (sortConfig.key === key && sortConfig.direction === 'asc') {
                    direction = 'desc';
                }
                setSortConfig({ key, direction });
            };

            const getSortedCardData = () => {
                let sortedData = [...baseCardData];
                const activeCards = sortedData.filter(card => !card.closed);
                const closedCards = sortedData.filter(card => card.closed);
                
                const sortGroup = (cards) => {
                    if (!sortConfig.key) return cards;
                    
                    return cards.sort((a, b) => {
                        let aValue = a[sortConfig.key];
                        let bValue = b[sortConfig.key];

                        if (sortConfig.key === 'openedDate' || sortConfig.key === 'feeNum') {
                            if (sortConfig.direction === 'asc') {
                                return aValue > bValue ? 1 : -1;
                            } else {
                                return aValue < bValue ? 1 : -1;
                            }
                        } else {
                            if (sortConfig.direction === 'asc') {
                                return aValue.localeCompare(bValue);
                            } else {
                                return bValue.localeCompare(aValue);
                            }
                        }
                    });
                };
                
                return [...sortGroup(activeCards), ...sortGroup(closedCards)];
            };

            const cardData = getSortedCardData();

            // Loyalty number handlers
            const addLoyaltyNumber = (category) => {
                const newNumber = {
                    id: Date.now(),
                    name: '',
                    number: '',
                    category: category === 'knownTraveler' ? 'Known Traveler' : '',
                    points: ''
                };
                
                setLoyaltyNumbers(prev => ({
                    ...prev,
                    [category]: [...prev[category], newNumber]
                }));
            };

            const updateLoyaltyNumber = (category, id, field, value) => {
                setLoyaltyNumbers(prev => ({
                    ...prev,
                    [category]: prev[category].map(item => 
                        item.id === id ? { ...item, [field]: value } : item
                    )
                }));
            };

            const deleteLoyaltyNumber = (category, id) => {
                setLoyaltyNumbers(prev => ({
                    ...prev,
                    [category]: prev[category].filter(item => item.id !== id)
                }));
            };

            const getFilteredLoyaltyNumbers = (category) => {
                if (!loyaltySearch) return loyaltyNumbers[category];
                
                return loyaltyNumbers[category].filter(item => 
                    item.name?.toLowerCase().includes(loyaltySearch.toLowerCase()) ||
                    item.number?.toLowerCase().includes(loyaltySearch.toLowerCase()) ||
                    item.category?.toLowerCase().includes(loyaltySearch.toLowerCase())
                );
            };

            // Referral link handlers
            const addReferralLink = () => {
                setReferralLinks(prev => [...prev, {
                    id: Date.now(),
                    card: '',
                    link: '',
                    bonus: '',
                    expiry: ''
                }]);
            };

            const updateReferralLink = (id, field, value) => {
                setReferralLinks(prev => prev.map(link => 
                    link.id === id ? { ...link, [field]: value } : link
                ));
            };

            const deleteReferralLink = (id) => {
                setReferralLinks(prev => prev.filter(link => link.id !== id));
            };

            // Export to CSV
            const exportToCSV = () => {
                const cardHeaders = ['Person', 'Card Name', 'Last 4', 'Opened', 'Annual Fee', 'Business', 'Credit Limit', 'Status'];
                const cardRows = cardData.map(card => [
                    card.person,
                    card.name,
                    card.digits,
                    card.opened,
                    card.fee,
                    card.business,
                    card.limit,
                    card.closed ? 'Closed' : 'Active'
                ]);

                let csvContent = 'Credit Cards\\n';
                csvContent += cardHeaders.join(',') + '\\n';
                csvContent += cardRows.map(row => row.join(',')).join('\\n');

                const blob = new Blob([csvContent], { type: 'text/csv' });
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'credit-cards.csv';
                a.click();
            };

            // Tab navigation
            const tabs = [
                { id: 'overview', label: 'üìä Overview' },
                { id: 'benefits', label: 'üéÅ Benefits' },
                { id: 'loyalty', label: 'üèÜ Loyalty' },
                { id: 'referrals', label: 'üîó Referrals' },
                { id: 'points', label: 'üí∞ Points' }
            ];

            return (
                <div className="min-h-screen bg-gray-50">
                    <header className="bg-gradient-to-r from-purple-700 to-indigo-700 text-white p-5 text-center sticky top-0 z-50">
                        <h1 className="text-3xl font-bold m-0">Jack & Marissa Credit Card Tracker</h1>
                    </header>

                    <nav className="bg-white border-b border-gray-200 overflow-x-auto sticky top-16 z-40">
                        <div className="flex min-w-max p-2">
                            {tabs.map((tab) => (
                                <button
                                    key={tab.id}
                                    onClick={() => setActiveTab(tab.id)}
                                    className={`px-4 py-3 mx-1 rounded-t-lg text-sm font-medium whitespace-nowrap transition-all ${
                                        activeTab === tab.id
                                            ? 'bg-indigo-600 text-white'
                                            : 'text-gray-600 hover:bg-gray-100'
                                    }`}
                                >
                                    {tab.label}
                                </button>
                            ))}
                        </div>
                    </nav>

                    <main className="min-h-[calc(100vh-140px)]">
                        {activeTab === 'overview' && (
                            <div className="p-5 bg-gray-50">
                                <h2 className="text-2xl font-bold mb-5 text-center text-blue-800">üìä Complete Card Portfolio</h2>
                                
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-8">
                                    <div className="bg-blue-100 p-5 rounded-xl text-center">
                                        <h3 className="text-lg text-blue-700 mb-2">Marissa's Annual Fees</h3>
                                        <p className="text-3xl font-bold text-blue-900">$2,008</p>
                                        <p className="text-sm text-blue-700">$167/month</p>
                                    </div>
                                    <div className="bg-purple-100 p-5 rounded-xl text-center">
                                        <h3 className="text-lg text-purple-700 mb-2">Jack's Annual Fees</h3>
                                        <p className="text-3xl font-bold text-purple-900">$1,490</p>
                                        <p className="text-sm text-purple-700">$124/month</p>
                                    </div>
                                </div>

                                <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-8">
                                    <div className="bg-green-100 p-5 rounded-xl">
                                        <h3 className="text-lg text-green-700 mb-2 text-center">Marissa's 5/24 Status</h3>
                                        <p className="text-4xl font-bold text-green-800 text-center">3/24</p>
                                        <p className="text-xs text-green-600 text-center">Room for 2 more Chase cards</p>
                                    </div>
                                    <div className="bg-green-100 p-5 rounded-xl">
                                        <h3 className="text-lg text-green-700 mb-2 text-center">Jack's 5/24 Status</h3>
                                        <p className="text-4xl font-bold text-green-800 text-center">2/24</p>
                                        <div className="text-xs text-green-600 mt-2">
                                            <p className="font-semibold">Cards counting:</p>
                                            <ul className="mt-1">
                                                <li>‚Ä¢ Personal Amex Platinum (2/5/25)</li>
                                                <li>‚Ä¢ Chase Sapphire Preferred (AU) (3/4/24)</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>

                                <div className="overflow-x-auto mb-6">
                                    <table className="w-full border-collapse bg-white rounded-lg overflow-hidden shadow-lg">
                                        <thead>
                                            <tr className="bg-blue-800 text-white">
                                                <th className="p-3 text-left text-xs cursor-pointer hover:bg-blue-700" onClick={() => handleSort('person')}>
                                                    Person {sortConfig.key === 'person' && (sortConfig.direction === 'asc' ? '‚Üë' : '‚Üì')}
                                                </th>
                                                <th className="p-3 text-left text-xs cursor-pointer hover:bg-blue-700" onClick={() => handleSort('name')}>
                                                    Card {sortConfig.key === 'name' && (sortConfig.direction === 'asc' ? '‚Üë' : '‚Üì')}
                                                </th>
                                                <th className="p-3 text-left text-xs">Last 4</th>
                                                <th className="p-3 text-left text-xs cursor-pointer hover:bg-blue-700" onClick={() => handleSort('opened')}>
                                                    Opened {sortConfig.key === 'opened' && (sortConfig.direction === 'asc' ? '‚Üë' : '‚Üì')}
                                                </th>
                                                <th className="p-3 text-left text-xs cursor-pointer hover:bg-blue-700" onClick={() => handleSort('feeNum')}>
                                                    Annual Fee {sortConfig.key === 'feeNum' && (sortConfig.direction === 'asc' ? '‚Üë' : '‚Üì')}
                                                </th>
                                                <th className="p-3 text-left text-xs">Business</th>
                                                <th className="p-3 text-left text-xs">Credit Limit</th>
                                                <th className="p-3 text-left text-xs">Date Closed</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {cardData.map((card, index) => (
                                                <tr key={index} className={`border-b hover:bg-gray-50 ${card.closed ? 'opacity-60' : ''}`}>
                                                    <td className="p-2 text-xs">{card.person}</td>
                                                    <td className={`p-2 text-xs ${card.closed ? 'line-through' : ''}`}>{card.name}</td>
                                                    <td className="p-2 text-xs">{card.digits}</td>
                                                    <td className="p-2 text-xs">{card.opened}</td>
                                                    <td className="p-2 text-xs">{card.fee}</td>
                                                    <td className="p-2 text-xs">{card.business}</td>
                                                    <td className="p-2 text-xs">{card.limit}</td>
                                                    <td className="p-2 text-xs">{card.closedDate || '-'}</td>
                                                </tr>
                                            ))}
                                        </tbody>
                                    </table>
                                </div>

                                <div className="text-center">
                                    <button
                                        onClick={exportToCSV}
                                        className="bg-green-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-green-700 transition-colors inline-flex items-center gap-2"
                                    >
                                        <Download /> Export to Spreadsheet
                                    </button>
                                </div>
                            </div>
                        )}

                        {activeTab === 'benefits' && (
                            <div className="p-5 bg-gray-50">
                                <h2 className="text-2xl font-bold mb-5 text-center text-blue-800">üéÅ Monthly Benefits Tracker</h2>
                                
                                {Object.entries(monthlyBenefits).map(([month, benefits]) => (
                                    <div key={month} className="mb-8">
                                        <h3 className="text-xl font-bold mb-4 text-gray-700 border-b-2 border-indigo-600 pb-2">{month}</h3>
                                        {benefits.map((benefit) => (
                                            <div key={benefit.id} className={`
                                                ${benefitsChecked[benefit.id] ? 'bg-green-50' : 'bg-white'} 
                                                p-4 mb-2 rounded-lg border 
                                                ${benefitsChecked[benefit.id] ? 'border-green-300' : 'border-gray-200'}
                                                flex items-start gap-3
                                            `}>
                                                <input
                                                    type="checkbox"
                                                    checked={benefitsChecked[benefit.id] || false}
                                                    onChange={() => handleBenefitCheck(benefit.id)}
                                                    className="w-5 h-5 mt-0.5"
                                                />
                                                <div className="flex-1">
                                                    <p className="text-sm font-bold mb-1 text-gray-800">{benefit.benefit}</p>
                                                    <p className="text-xs text-gray-600">Card: {benefit.card}</p>
                                                    <p className="text-xs text-gray-600">Person: {benefit.person}</p>
                                                </div>
                                                {benefitsChecked[benefit.id] && <CheckCircle2 />}
                                            </div>
                                        ))}
                                    </div>
                                ))}
                            </div>
                        )}

                        {activeTab === 'loyalty' && (
                            <div className="p-5 bg-gray-50">
                                <h2 className="text-2xl font-bold mb-5 text-center text-blue-800">üèÜ Loyalty Numbers Manager</h2>
                                
                                <div className="flex justify-between items-center mb-4">
                                    <div className="relative flex-1 mr-4">
                                        <input
                                            type="text"
                                            placeholder="Search loyalty programs..."
                                            value={loyaltySearch}
                                            onChange={(e) => setLoyaltySearch(e.target.value)}
                                            className="w-full pl-10 pr-4 py-3 border rounded-lg"
                                        />
                                    </div>
                                    <button
                                        onClick={() => setLoyaltyEditMode(!loyaltyEditMode)}
                                        className={`px-4 py-2 rounded-lg font-medium transition-colors ${
                                            loyaltyEditMode ? 'bg-green-600 text-white' : 'bg-indigo-600 text-white'
                                        }`}
                                    >
                                        {loyaltyEditMode ? 'Save Changes' : 'Edit Mode'}
                                    </button>
                                </div>

                                {Object.entries(loyaltyNumbers).map(([category, items]) => (
                                    <div key={category} className="mb-8">
                                        <h3 className="text-xl font-bold text-gray-700 mb-4">
                                            {category === 'knownTraveler' ? 'Known Traveler Numbers' : 
                                             category === 'airlines' ? 'Airline Programs' : 
                                             category === 'hotels' ? 'Hotel Programs' : 'Other Programs'}
                                        </h3>
                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-2">
                                            {getFilteredLoyaltyNumbers(category).map(item => (
                                                <div key={item.id} className="bg-white p-3 rounded-lg border border-gray-200">
                                                    {loyaltyEditMode ? (
                                                        <div className="flex items-center gap-2">
                                                            <input
                                                                type="text"
                                                                placeholder="Name"
                                                                value={item.name || item.category}
                                                                onChange={(e) => updateLoyaltyNumber(category, item.id, 'name', e.target.value)}
                                                                className="flex-1 px-2 py-1 border rounded text-sm"
                                                            />
                                                            <input
                                                                type="text"
                                                                placeholder="Number"
                                                                value={item.number}
                                                                onChange={(e) => updateLoyaltyNumber(category, item.id, 'number', e.target.value)}
                                                                className="flex-1 px-2 py-1 border rounded text-sm font-mono"
                                                            />
                                                            <button
                                                                onClick={() => deleteLoyaltyNumber(category, item.id)}
                                                                className="text-red-600 hover:text-red-800"
                                                            >
                                                                <Trash2 />
                                                            </button>
                                                        </div>
                                                    ) : (
                                                        <div className="flex justify-between items-center">
                                                            <div>
                                                                <p className="font-semibold text-sm">{item.name || item.category}</p>
                                                                <p className="text-sm font-mono text-gray-600">{item.number}</p>
                                                                {item.points && (
                                                                    <p className="text-xs text-green-600 font-semibold mt-1">{item.points} points</p>
                                                                )}
                                                            </div>
                                                        </div>
                                                    )}
                                                </div>
                                            ))}
                                        </div>
                                        {loyaltyEditMode && (
                                            <button
                                                onClick={() => addLoyaltyNumber(category)}
                                                className="mt-2 bg-green-600 text-white px-3 py-1 rounded-lg text-sm hover:bg-green-700 inline-flex items-center gap-1"
                                            >
                                                <Plus /> Add
                                            </button>
                                        )}
                                    </div>
                                ))}
                            </div>
                        )}

                        {activeTab === 'referrals' && (
                            <div className="p-5 bg-gray-50">
                                <h2 className="text-2xl font-bold mb-5 text-center text-blue-800">üîó Referral Link Manager</h2>
                                
                                <div className="mb-4">
                                    <button
                                        onClick={addReferralLink}
                                        className="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 inline-flex items-center gap-2"
                                    >
                                        <Plus /> Add Referral Link
                                    </button>
                                </div>

                                <div className="space-y-4">
                                    {referralLinks.map(link => (
                                        <div key={link.id} className="bg-white p-5 rounded-xl border border-gray-200 shadow-md">
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
                                                <input
                                                    type="text"
                                                    placeholder="Card Name"
                                                    value={link.card}
                                                    onChange={(e) => updateReferralLink(link.id, 'card', e.target.value)}
                                                    className="px-3 py-2 border rounded-lg"
                                                />
                                                <input
                                                    type="text"
                                                    placeholder="Referral Bonus"
                                                    value={link.bonus}
                                                    onChange={(e) => updateReferralLink(link.id, 'bonus', e.target.value)}
                                                    className="px-3 py-2 border rounded-lg"
                                                />
                                                <input
                                                    type="url"
                                                    placeholder="Referral Link"
                                                    value={link.link}
                                                    onChange={(e) => updateReferralLink(link.id, 'link', e.target.value)}
                                                    className="px-3 py-2 border rounded-lg md:col-span-2"
                                                />
                                                <div className="flex items-center gap-2">
                                                    {link.link && (
                                                        <button
                                                            onClick={() => navigator.clipboard.writeText(link.link)}
                                                            className="bg-blue-600 text-white px-3 py-2 rounded-lg hover:bg-blue-700 text-sm"
                                                        >
                                                            Copy Link
                                                        </button>
                                                    )}
                                                    <button
                                                        onClick={() => deleteReferralLink(link.id)}
                                                        className="bg-red-600 text-white px-3 py-2 rounded-lg hover:bg-red-700"
                                                    >
                                                        <Trash2 />
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    ))}
                                </div>

                                {referralLinks.length === 0 && (
                                    <div className="bg-gray-100 p-8 rounded-xl text-center">
                                        <p className="text-gray-600">No referral links added yet. Click "Add Referral Link" to get started!</p>
                                    </div>
                                )}
                            </div>
                        )}

                        {activeTab === 'points' && (
                            <div className="p-5 bg-gray-50">
                                <h2 className="text-2xl font-bold mb-5 text-center text-blue-800">üí∞ Points & Miles Tracker</h2>

                                <div className="bg-white rounded-xl shadow-md p-5">
                                    <div className="flex justify-between items-center mb-5">
                                        <h3 className="text-lg font-bold text-gray-800">Update Balances</h3>
                                        <button
                                            onClick={() => setEditMode(!editMode)}
                                            className={`px-4 py-2 rounded-lg font-medium transition-colors ${
                                                editMode ? 'bg-green-600 text-white' : 'bg-indigo-600 text-white'
                                            }`}
                                        >
                                            {editMode ? 'Save Changes' : 'Edit Mode'}
                                        </button>
                                    </div>

                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        {Object.entries(pointsBalances).map(([program, balance]) => (
                                            <div key={program} className="bg-gray-50 rounded-lg p-4">
                                                <div className="flex justify-between items-center mb-2">
                                                    <h4 className="font-semibold text-gray-800">{program}</h4>
                                                    {editMode ? (
                                                        <input
                                                            type="number"
                                                            value={balance}
                                                            onChange={(e) => handlePointsUpdate(program, e.target.value)}
                                                            className="w-32 px-3 py-1 border rounded-md text-right font-semibold"
                                                        />
                                                    ) : (
                                                        <span className="text-xl font-bold text-indigo-600">
                                                            {balance.toLocaleString()}
                                                        </span>
                                                    )}
                                                </div>
                                                <div className="text-xs text-gray-500">
                                                    Est. value: ${(balance * 0.02).toFixed(0)}
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>
                        )}
                    </main>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>